#!/bin/sh

readonly STYLESHEET="$HOME/.pandoc/latex.css"

usage(){
cat <<-EOF
	markdown previewer
	usage: mdp <filename> [keep temp]
EOF

exit 1
}


main(){
	[ "$*" == '' ] && usage

	local filename=$1; shift
	local keep=$1; shift

	local base="$(basename $filename .md)"
#local hash="$(echo "$(gdate +%s%N) $base" | gsha1sum | cut -c -8)"
#	local hash="$(echo "$base" | gsha1sum | cut -c -8)"
	local outfile="$base.html"

		pandoc "$filename"  \
			-o "$outfile"   \
			-c "$STYLESHEET"\
			--mathjax

		open "$outfile"

#		if [ "$keep" = '' ]; then
#			read -p "Refresh $outfile with any key" -n 1 -s
#			echo
#		fi
}

main $*
